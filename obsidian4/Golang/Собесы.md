1. Из неинициализированной мапы нельзя читать, будет паника. Остальные операции допустимы
2. Чтение из закрытого канала это зеро велью и булевый флаг, запись - паника, запись на закрытие? - паника
3. Что случится с циклом по каналу, который закрылся? - завершится просто
4. У дефера область видимости ток в том месте, где он обьявлен
5. До 1.21 у циклов переменная создавалась 1 раз и каждый раз перезаписывалась. То есть в там случае горутина могла обратиться не к своему значению и надо было явно ее передавать
```go
for _, val := range values {
	go func(val) {
		// do something
	}
}
```
6. Если создать 1 млн + горутин, которые используют мьютексы, то возникнет паника!!
7. Поток в линуксе весит около 8 мб, а горутина 2-4 кб.
8.  Можно считать из закрытого канала, но нельзя записать в него -  паника. Если считать из закрытого канала пустые данные, то выдается 0. Если там было значение, оно будет вычитано. Чтение из закрытого канала будет до тех пор, пока там есть данные.
9. `var ch chan int` - nil канал, потому что фактически канал не создан. Все операции с ним это panic. Запись или чтение - deadlock. Записать в горутине конечно можно, но прочитать не получится
10. Сам по себе оператор select блокирующий, но есть использовать default, то он будет пропускать дальше. time.After прикольная штука
![[Pasted image 20250827135726.png]]

11. У Горутины 3 состояния - running, waiting, ready
12. У компилятора есть возможность поменять местами инструкции для оптимизации, если финальная логика не будет нарушена
13. В RWMutex несколько читателей может быть в критической секции, но если приходит писатель, то он будет ждать, пока все читатели не выйдут
![[Pasted image 20250827185016.png]]


14.  Всё, что находится в пакете sync, нельзя копировать!!!!!!!!!!!
15.  ``Data race`` - это гонка за ресурсы. Обязательно один из гонщиков должен писать, а не все только читать.
16. `Race condtion` - Это ошибка проектирования приложения, при которой работа системы или приложения зависит от того, в каком порядке выполняется код.


## Не буферизированный канал
![[Pasted image 20250827130806.png]]

----> Ответ ниже













![[Pasted image 20250827130759.png]]

![[Pasted image 20250827130939.png]]





## Паттерн генератор 

Подразумевает в себе то, что основной поток не блочится, когда мы пишем в канал. Ожидание и закрытие канала так же происходят в отдельной горутине.


17. Контекст свичинг (переключения потоков) ядра работает медленно. У потока есть регистры, экстракшен поинтер, стек программы. Все это будет долго переключаться.

18. `sync.Map` окупает себя, если используется 4 и более ядра на процессоре.

19. Go всегда пытается выделить значения переменных на стеке, кроме некоторых случаев. Этот механизм, который решает, где будет хранится значение переменной, называется `Escape Analysis`
Значение будет положено в кучу, если:
+ Возврат значение по ссылке
+ Значение передается в аргумент типа interface{}
+ Размер значения переменной превышает лимит стека

В процессе работы экспеип анализа первым делом строится граф весов, где вершина - это наименование переменной, а вес - это тип присваивания (Например, -1 ставится, если мы берем ссылку от переменной). Далее происходит обход этого графа и переменные, которые нужно перенести, помечаются флагом.

+ ![[Pasted image 20250920202312.png]]
+ Устойчивость к разделение - мы можем разделить систему и она не сломается.

+ Есть синхронная и асинхронная репликация, но чаще используют смешанную, когда есть мастер и пару реплик синхронных, с которых можно читать (много читать то, что меняется гораздо чаще). Остальные реплики асинхронные с ним, чаще всего, берут бекапы или другие данные (Очень много читать, что редко меняется).
+ https://www.youtube.com/watch?v=reGoEYytMto&list=PLZvfMc-lVSSO2zhyyxQLFmio8NxvQqZoN&index=18 - 1:41 про curcuit breaker